# 記憶コマンド

開発の履歴や得られた知見を記録します。
特に*Agentの推論や操作の失敗、コマンドの誤り、指示の誤解*などについて記録しておくことで*再発を防止*します。

## 実行内容
1. AI Agentの履歴から何を行ったかを収集
    * 特に操作の失敗やユーザからの追加指示、誤解の修正などについては重点的にまとめる
2. CLAUDE.mdの記憶の更新日時以降のgit logやファイル変更内容、claude codeのセッション履歴をもとに、知見を収集
    * 更新日時が記録されていない場合は直近のPR作成日時以降を対象とする。
3. Serena MCPに上記の知見を記憶
4. Serena MCPの記憶をチェックし、誤りがあれば修正、古くなっていれば削除
5. AGENTS.mdのSerenaの利用方法を更新
6. 記憶の更新日時をCLAUDE.mdに記録

## 作業完了報告（必須）

作業完了時は以下の情報を必ず報告すること：

### 報告テンプレート

```
記憶コマンドの実行が完了しました。

## 記録内容

### 対象期間
- **開始日時**: YYYY-MM-DD HH:MM:SS
- **終了日時**: YYYY-MM-DD HH:MM:SS
- **対象期間**: N日間

### 記録した知見
- **記録件数**: N件
- **カテゴリ別**:
  - 操作の失敗: X件
  - コマンドの誤り: Y件
  - 指示の誤解: Z件
  - ベストプラクティス: W件
  - その他: V件

### 主なトピック
1. [トピック1の概要]
2. [トピック2の概要]
3. [トピック3の概要]

### 更新したSerenaメモリー
- **メモリーファイル名**: `memory-file-name.md`
- **更新方法**: write_memory / edit_memory
- **更新箇所**: [更新した主なセクション]

### 関連するPR/コミット
- **PR**: https://github.com/owner/repo/pull/123 - [PRタイトル]
- **コミット**: `abc1234` - "コミットメッセージ"

### CLAUDE.mdの更新
- **記憶更新日時**: YYYY-MM-DD HH:MM:SS（更新済み）
- **更新箇所**: [更新したセクション名]

### 統計
- **総記録行数**: N行
- **新規追加**: X行
- **更新**: Y行
- **削除**: Z行
- **所要時間**: 約N分
```

### 報告例

```
記憶コマンドの実行が完了しました。

## 記録内容

### 対象期間
- **開始日時**: 2026-01-30 10:00:00
- **終了日時**: 2026-01-31 15:30:00
- **対象期間**: 1.2日間

### 記録した知見
- **記録件数**: 8件
- **カテゴリ別**:
  - 操作の失敗: 2件（git stash復元のタイミング、async修飾子の誤用）
  - コマンドの誤り: 1件（GitHub MCP APIのパラメータ型エラー）
  - 指示の誤解: 1件（PR修正対応の範囲）
  - ベストプラクティス: 3件（レビュー対応フロー、報告テンプレート、バイナリファイル除外）
  - その他: 1件（Copilotレビューの活用）

### 主なトピック
1. affaan-mプラグインのフックスクリプト実装（Claude Code Hooks仕様準拠）
2. レビュー指摘への体系的な対応方法（Accept/Rejectの判断基準）
3. async/awaitの適切な使用タイミング

### 更新したSerenaメモリー
- **メモリーファイル名**: `development-history-20260131.md`
- **更新方法**: write_memory（新規作成）
- **更新箇所**:
  - 開発履歴（2026-01-30〜2026-01-31）
  - フックスクリプト実装の知見
  - レビュー対応のベストプラクティス
  - 報告テンプレートの導入背景

### 関連するPR/コミット
- **PR**: https://github.com/takemi-ohama/ai-plugins/pull/13 - "feat: affaan-mプラグインのフックスクリプトをClaude Code仕様に実装"
- **コミット**: `79ac96a` - "fix: affaan-mプラグインのフックスクリプトのセキュリティとエラーハンドリングを改善"
- **コミット**: `00661f1` - "fix: affaan-mフックスクリプトのコード品質とエラーハンドリングを改善"

### CLAUDE.mdの更新
- **記憶更新日時**: 2026-01-31 15:30:00（更新済み）
- **更新箇所**: Serenaメモリー管理セクション

### 統計
- **総記録行数**: 245行
- **新規追加**: 245行
- **更新**: 0行
- **削除**: 0行
- **所要時間**: 約20分
```

### 報告のポイント

1. **対象期間の明確化**: いつからいつまでの知見を記録したか
2. **カテゴリ別の分類**: 失敗、誤り、誤解、ベストプラクティスなど
3. **主なトピックの要約**: 記録した重要な知見を3〜5個に絞る
4. **Serenaメモリーの特定**: どのファイルに記録したか
5. **関連PR/コミットの明記**: 追跡可能性の確保
6. **CLAUDE.mdの更新確認**: 記憶更新日時が正しく記録されているか

