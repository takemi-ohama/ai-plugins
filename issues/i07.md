# Task #3: Sub-AgentへのClaude Code Skills導入 - 設計計画書

**作成日**: 2025-12-15
**担当**: director agent
**ステータス**: 🔄 分析・設計中

---

## プロジェクト概要

NDFプラグインの6つのsub-agent（director、data-analyst、corder、researcher、scanner、qa）にClaude Code Skillsを導入し、各エージェントの作業効率を最大化する。

**目標バージョン**: 1.1.1 → 1.2.0（MINOR: 新機能追加）

---

## 調査完了: Claude Code Skills仕様

### Skills基本仕様
- **Model-invoked**: Claudeが自律的に判断して呼び出す
- **必須ファイル**: `SKILL.md`（YAMLフロントマター + Markdown）
- **YAMLフロントマター**:
  - `name`: スキル名（必須、小文字・数字・ハイフン、最大64文字）
  - `description`: 説明（必須、最大1024文字、トリガー用語含む）
  - `allowed-tools`: アクセス可能ツール制限（オプション）

### ディレクトリ構造（推奨）
```
skill-name/
├── SKILL.md              # 必須
├── reference.md          # オプション: 詳細ドキュメント
├── examples.md           # オプション: 使用例
├── scripts/              # オプション: スクリプト
│   └── helper.py
└── templates/            # オプション: テンプレート
    └── template.txt
```

### plugin.jsonへの統合（推定）
```json
{
  "name": "ndf",
  "version": "1.2.0",
  "skills": [
    "./skills/skill-name-1",
    "./skills/skill-name-2"
  ]
}
```

### ベストプラクティス
- **焦点を絞る**: 1 Skill = 1機能
- **明確な説明**: トリガー用語を含む具体的なdescription
- **Progressive Disclosure**: 必要な場合のみ支援ファイルを読み込む

---

## 既存Sub-Agent分析

### 1. director - タスク統括・計画立案エージェント

**専門領域**:
- タスク全体の統括、進捗管理
- 情報収集と調査（Serena MCP活用）
- 計画立案と並列実行判断
- 結果の統合と報告

**使用ツール**:
- Serena MCP（コード探索、メモリー管理）
- GitHub MCP（Issue/PR管理）
- 基本ツール（Read, Glob, Grep, Bash）

**作業プロセス**:
1. 要求理解 → TodoList作成
2. 情報収集（Serenaメモリー、コードベース構造）
3. 計画立案と並列実行判断
4. サブエージェント特定とMain Agentへ報告
5. 結果統合と報告

**Skillsで改善できる領域**:
- ✅ **計画書テンプレート自動生成**
- ✅ **GitHub Issue/PR作成の定型化**
- ✅ **並列実行判断チェックリスト**
- ✅ **進捗レポート生成**
- ✅ **サブエージェント連携パターン**

---

### 2. data-analyst - データ分析・SQL専門エージェント

**専門領域**:
- SQL生成と実行（BigQuery、DBHub）
- データ解釈と分析
- データ出力（CSV、JSON、Excel）

**使用ツール**:
- BigQuery MCP
- DBHub MCP

**作業プロセス**:
1. 要件理解
2. データ探索（スキーマ確認）
3. SQL設計
4. 実行と検証
5. 解釈と報告
6. ファイル出力

**Skillsで改善できる領域**:
- ✅ **SQL最適化パターン**
- ✅ **データ可視化スクリプト**
- ✅ **CSV/JSON/Excel出力テンプレート**
- ✅ **データ品質チェック**
- ✅ **レポート生成テンプレート**

---

### 3. corder - コーディング専門エージェント

**専門領域**:
- コード設計と実装
- コード品質保証（Codex MCP）
- コードベース理解（Serena MCP）
- 最新情報の活用（Context7 MCP）

**使用ツール**:
- Codex CLI MCP
- Serena MCP
- Context7 MCP

**作業プロセス**:
1. 要件理解
2. コードベース調査（Serena）
3. 最新情報収集（Context7）
4. 設計
5. 実装
6. レビュー（Codex）
7. 改善
8. テスト

**Skillsで改善できる領域**:
- ✅ **コード生成テンプレート**（設計パターン別）
- ✅ **リファクタリングパターン**
- ✅ **テストコード生成**
- ✅ **ドキュメント自動生成**
- ✅ **セキュリティチェックリスト**

---

### 4. researcher - 情報収集・調査専門エージェント

**専門領域**:
- 技術ドキュメント調査（AWS Docs MCP）
- Webスクレイピング（WebFetch、Chrome DevTools MCP）
- コードベース調査（Codex MCP）
- 情報の統合と分析

**使用ツール**:
- WebFetch（優先、静的ページ）
- AWS Documentation MCP
- Chrome DevTools MCP（動的ページ）
- Codex CLI MCP

**作業プロセス**:
1. 調査計画
2. ツール選択
3. 情報収集
4. 情報整理
5. 分析
6. 報告

**Skillsで改善できる領域**:
- ✅ **調査レポートテンプレート**
- ✅ **ベストプラクティス収集パターン**
- ✅ **API仕様抽出スクリプト**
- ✅ **技術比較テーブル生成**
- ✅ **WebスクレイピングパターンLibrary**

---

### 5. scanner - ファイル読み取り専門エージェント

**専門領域**:
- PDF読み取り
- 画像読み取り（OCR）
- Officeファイル読み取り（PowerPoint、Excel、Word）
- データ変換と整理

**使用ツール**:
- Read tool（画像優先）
- Codex CLI MCP（PDF、Office）

**作業プロセス**:
1. ファイル確認
2. ツール選択
3. 読み取り実行
4. 内容抽出
5. 構造化
6. 報告

**Skillsで改善できる領域**:
- ✅ **PDF要約テンプレート**
- ✅ **OCR後処理スクリプト**
- ✅ **Excelデータ構造化**
- ✅ **PowerPointスライド要約**
- ✅ **ファイル形式変換ツール**

---

### 6. qa - 品質保証・テスト専門エージェント

**専門領域**:
- コード品質レビュー（Codex MCP）
- セキュリティ検証（OWASP Top 10）
- パフォーマンステスト（Chrome DevTools MCP）
- テストカバレッジ
- ドキュメント品質
- Claude Codeプラグイン品質

**使用ツール**:
- WebFetch（静的ページ確認）
- Codex CLI MCP
- Serena MCP
- Chrome DevTools MCP
- Claude Code MCP

**作業プロセス**:
1. スコープ確認
2. ツール選択
3. 静的分析（Codex）
4. 動的テスト（Chrome DevTools）
5. 構造分析（Serena）
6. ドキュメント検証（WebFetch）
7. レポート作成
8. 修正支援

**Skillsで改善できる領域**:
- ✅ **コードレビューチェックリスト**
- ✅ **セキュリティスキャンテンプレート**
- ✅ **パフォーマンステストレポート**
- ✅ **テストカバレッジ分析**
- ✅ **品質レポート生成**

---

## 次のステップ

### タスク完了待ち
- ✅ Claude Code Skills公式仕様調査（researcher）
- 🔄 外部公開Skills調査（researcher）- 進行中

### 実施予定
1. **Skills詳細設計** - director（このドキュメント作成後）
2. **スクリプト・テンプレート設計** - director
3. **Skills実装** - corder
4. **バージョン管理とドキュメント更新** - director

---

## 成果物予定

### 新規ディレクトリ
```
plugins/ndf/skills/
├── director-planning/
├── director-github-integration/
├── data-analyst-sql-optimization/
├── data-analyst-report-generation/
├── corder-code-templates/
├── corder-test-generation/
├── researcher-report-templates/
├── scanner-pdf-analysis/
├── scanner-excel-extraction/
├── qa-code-review-checklist/
├── qa-security-scan/
└── qa-performance-test/
```

### 更新ファイル
- `plugins/ndf/.claude-plugin/plugin.json` - skills配列追加、バージョン1.2.0
- `plugins/ndf/CLAUDE.ndf.md` - Skills使用方法追加
- `plugins/ndf/README.md` - Skills説明追加
- Serenaメモリー（plugin-ndf.md）更新

---

**次回更新**: Skills詳細設計完了後
